{{/* usage: {{< prevcard "post/2025-11-23_20251122_fascism" >}} */}}

{{ $path := .Get 0 }}
{{ $page := site.GetPage $path }}

{{ if $page }}
<div class="my-4 w-full">
  <a href="{{ $page.RelPermalink }}"
     class="group block w-full max-w-2xl
            rounded-lg border border-slate-300/70
            bg-slate-900/50 backdrop-blur
            px-4 py-3
            transition
            hover:border-slate-400/70 hover:shadow-sm
            dark:border-slate-700/70 dark:bg-slate-950/30 dark:hover:border-slate-600/80">

    <!-- header: PREV + date -->
    <div class="flex items-center gap-2 text-[11px] text-slate-400 dark:text-slate-500">
      <span class="inline-flex items-center rounded-md border border-indigo-300/30 bg-indigo-500/10
                   px-2 py-0.5 font-semibold tracking-wide text-indigo-300">
        PREV
      </span>
      <span class="font-mono">
        {{ $page.Date.Format "2006-01-02" }}
      </span>
    </div>

    <!-- title -->
    <h4 class="mt-1 text-sm font-semibold text-slate-100
               group-hover:text-indigo-300 transition
               line-clamp-1">
      {{ $page.Title }}
    </h4>

    <!-- summary (optional): 1〜2行。縦幅が気になるなら line-clamp-1 推奨 -->
    <p class="mt-1 text-xs leading-snug text-slate-400 dark:text-slate-300/80 line-clamp-1">
      {{ $page.Summary | plainify | truncate 90 }}
    </p>

  </a>
</div>
{{ else }}
<p class="text-xs text-red-500">リンクエラー: {{ $path }} が見つかりません。</p>
{{ end }}
