{{/* usage: {{< prevcard "posts/20251122/fascism" >}} */}}

{{ $path := .Get 0 }}
{{ $page := site.GetPage $path }}

{{ if $page }}
<div class="my-5 w-full">
  <a href="{{ $page.RelPermalink }}"
     class="group block w-full max-w-2xl rounded-xl border border-slate-200/80 bg-slate-50/60
            shadow-sm transition
            hover:shadow-md hover:border-slate-300/80
            dark:border-slate-700/70 dark:bg-slate-900/40 dark:hover:border-slate-600/80">

    {{/* top bar (iframeっぽさ) */}}
    <div class="h-1 w-full bg-gradient-to-r from-indigo-400/40 via-slate-200/40 to-slate-200/0
                dark:from-indigo-300/20 dark:via-slate-700/20 dark:to-slate-700/0"></div>

    <div class="p-4 sm:p-5 min-w-0">
      {{/* inner panel */}}
      <div class="rounded-lg border border-slate-200/60 bg-white/80 p-4
                  dark:border-slate-700/60 dark:bg-slate-950/40">

        {{/* header */}}
        <div class="flex items-center justify-between gap-3">
          <span class="inline-flex items-center gap-1 rounded-md border border-indigo-200/80 bg-indigo-50 px-2 py-0.5
                       text-[11px] font-semibold tracking-wide text-indigo-600
                       dark:border-indigo-400/20 dark:bg-indigo-500/10 dark:text-indigo-300">
            PREV
          </span>

          <span class="shrink-0 text-[12px] font-mono text-slate-400 dark:text-slate-500">
            {{ $page.Date.Format "2006-01-02" }}
          </span>
        </div>

        {{/* title */}}
        <h4 class="mt-3 text-[15px] sm:text-base font-semibold text-slate-800
                   group-hover:text-indigo-600 transition
                   line-clamp-1 dark:text-slate-100 dark:group-hover:text-indigo-300">
          {{ $page.Title }}
        </h4>

        {{/* summary */}}
        <p class="mt-2 text-sm leading-relaxed text-slate-600 line-clamp-2
                  dark:text-slate-300/90">
          {{ $page.Summary | plainify | truncate 120 }}
        </p>

        {{/* footer (URLっぽい表示でiframe感) */}}
        <div class="mt-3 flex items-center justify-between gap-3">
          <span class="truncate text-[12px] text-slate-400 dark:text-slate-500">
            {{ $page.Site.BaseURL | default "" }}{{ $page.RelPermalink }}
          </span>
          <span class="shrink-0 text-[12px] font-semibold text-slate-500 group-hover:text-indigo-600 transition
                       dark:text-slate-400 dark:group-hover:text-indigo-300">
            Open →
          </span>
        </div>

      </div>
    </div>
  </a>
</div>
{{ else }}
<p class="text-xs text-red-500">リンクエラー: {{ $path }} が見つかりません。</p>
{{ end }}
